!function(){"use strict";var e=[{question:"Что означает HTML?",answers:["Hypertext Markup Language","Hypertext Markdown Language","Hyperloop Machine Language","Helicopter Terminal Motorboat Lamborgini"],correct:1},{question:"Что означает CSS?",answers:["Central Style Sheets","Cascading Style Sheets","Cascading Simple Sheets","Cars SUVs Sailboats"],correct:2},{question:"Какой язык работает в браузере?",answers:["Java","C","Python","JavaScript"],correct:4},{question:"В каком году был создан JavaScript?",answers:["1996","1995","1994","все ответы неверные"],correct:2}];(function(){const e=document.querySelector(".welcome-cover"),t=document.querySelector(".welcome-cover__btn"),i=document.querySelector(".bg"),n=document.querySelector(".quiz");t.onclick=function(){i.classList.add("active"),n.classList.add("active"),e.classList.add("hidden")}})(),function(){const e="Давайте сыграем?",t=document.querySelector(".welcome-cover__title");let i=0,n=0,s="";!function r(){let a=setTimeout((()=>{if(s+=e[i][n],t.innerHTML=s+"|",n++,n>=e[i].length&&(n=0,i++,16==i))return clearTimeout(a),t.innerHTML=s,!0;r()}),100)}()}(),function(){function e(e,i,n,s,r,a){const o=(e-i)/(n-i)*(r-s)+s;return a?s<r?t(o,s,r):t(o,r,s):o}function t(e,t,i){return console.log(i),Math.max(Math.min(e,i),t)}function i(e,t){return Math.round(n(e,t))}function n(e,t){return e>t&&([e,t]=[t,e]),Math.random()*(t-e)+e}function s(){return 1===i(0,1)?1:-1}function r(t,r){let a,o,c,h,l,u,d,g,m,w=Object.assign({},{maxSize:30,minSize:4,speed:1,fov:20,rotate:1,flip:0,wave:30,gravity:0,images:[]},t),f=w.images[i(0,w.images.length-1)],v=0,p=0,y=1,b=0;function S(){a=i(0,r.canvas.width),c=i(0,w.fov),l=e(c,0,w.fov,0,1),h=e(w.maxSize*l,0,w.maxSize,w.minSize,w.maxSize),o=-h,u=e(l,0,1,1,5)/10*w.speed,v=n(0,.05)*s(),g=n(0,.1)*s()*w.rotate,m=n(0,.01)*s()*w.flip,d=n(0,1)*s()}S(),o=i(-h/2,r.canvas.height+h),this.update=function(){b+=v,u+=w.gravity,o+=u,a+=(Math.sin(b)+d)*l,p+=g,y+=m,(b>=w.wave*l||b<=-w.wave*l)&&(v*=-1),(y<=0||y>=1)&&(m*=-1),o>r.canvas.height&&S()},this.draw=function(){r.save(),r.translate(a,o),r.rotate(p*Math.PI/180),r.scale(y,1),r.drawImage(f,-h/2,-h/2,h,h),r.restore()}}(function e(t){if(!t)return Promise.reject();if("string"==typeof t){const e=t;(t=new Image).src=e}else{if(void 0!==t.length){const i=[].map.call(t,(t=>e(t).catch((e=>e))));return Promise.all(i).then((e=>{const t=e.filter((e=>e.naturalWidth));return t.length===e.length?t:Promise.reject({loaded:t,errored:e.filter((e=>!e.naturalWidth))})}))}if("IMG"!==t.tagName)return Promise.reject()}const i=new Promise(((e,i)=>{function n(){t.naturalWidth?e(t):i(t),t.removeEventListener("load",n),t.removeEventListener("error",n)}t.naturalWidth?e(t):t.complete?i(t):(t.addEventListener("load",n),t.addEventListener("error",n))}));return i.image=t,i})(["./img/bg/bulb-bg.svg","./img/bg/question-bg.svg"]).then((function(e){let t=[],n={maxSize:32,minSize:16,speed:1,fov:100,rotate:10,flip:0,wave:30,gravity:0,images:e},s=document.querySelector(".bg");s.width=window.innerWidth,s.height=window.innerHeight;let a=s.getContext("2d");document.body.insertAdjacentElement("afterbegin",s);for(let s=0;s<100;s++)i(0,e.lenght),t.push(new r(n,a));!function e(){a.clearRect(0,0,s.width,s.height),t.forEach((function(e){e.update(),e.draw()})),window.requestAnimationFrame((()=>e()))}(),window.addEventListener("resize",(()=>(s.width=window.innerWidth,void(s.height=window.innerHeight))))}))}(),function t(){const i=e,n=document.querySelector("#quiz-header"),s=document.querySelector("#quiz-answers"),r=document.querySelector("#quiz-submit");let a=0,o=0;function c(){n.innerHTML="",s.innerHTML=""}function h(){const e=i[o].question,t='<h2 class="quiz-header__question-title">%question%</h2>'.replace("%question%",e);n.innerHTML=t;for(const[e,t]of i[o].answers.entries()){let i=e+1;const n='<li class="quiz-answers__item">\n          <label class="quiz-answers__label">\n            <input value="%number%" type="radio" class="quiz-answers__answer" name="quiz-answers__answer" />\n            <span>%answer%</span>\n          </label>\n        </li>'.replace("%answer%",t).replace("%number%",i);s.innerHTML+=n}}function l(){let e,s;const o=document.body,c=document.querySelector(".bg"),h=document.querySelector(".fireworks");function l(){o.style.backgroundImage="url('./img/bg/satisfactory-bg.gif')",o.style.backgroundRepeat="no-repeat",o.style.backgroundSize="cover",o.style.backgroundPosition="top center"}a===i.length?(e="Поздравляем!",s="Вы ответили верно на все вопросы!",h.classList.add("active")):100*a/i.length>=50?(e="Неплохой результат",s="Вы дали более половины правильных ответов",l()):(e="Не расстраивайся, все ещё впереди!",s="Пока у вас меньше половины правильных ответов",l());let u=`${a} из ${i.length}`;const d='<h2 class="quiz-header__results-title">%title%</h2>\n      <h3 class="quiz-header__results-summary">%message%</h3>\n      <p class="quiz-header__results-result">%result%</p>'.replace("%title%",e).replace("%message%",s).replace("%result%",u);n.innerHTML=d,r.blur(),r.innerText="Начать заново",r.onclick=()=>{t(),c.classList.add("active"),h.classList.remove("active"),document.body.style.background="var(--page-bg)",r.innerText="Ответить"},c.classList.remove("active")}c(),h(),r.onclick=function(){const e=document.querySelector("#quiz"),t=document.querySelectorAll(".quiz-answers__label"),n=s.querySelector('input[type="radio"]:checked');if(!n){r.blur(),document.querySelectorAll("label");for(let e=0;e<t.length;e++){const i=t[e];i.classList.add("not-selected"),i.onclick=()=>{t.forEach((e=>{e.classList.remove("not-selected")}))}}return setInterval((()=>{e.classList.add("shake")}),100),void e.classList.remove("shake")}if(parseInt(n.value)===i[o].correct&&a++,o!==i.length-1)return o++,c(),void h();c(),l()}}(),function(){const e=()=>{const e=360*Math.random()|0,t=275*(e/200|0)+e%200;return e=>`hsl(${t}, ${100*(e||1)}%, ${60*(e||1)}%)`};class t{constructor(e){this.fireworks=e,this.salve=[],this.x=Math.random(),this.t=0,this.tmod=20+20*Math.random()|0,this.tmax=500+1e3*Math.random(),this._shot=e=>{e.y<e.ym&&(e.cb=this._prepareExplosion),e.x+=e.mx,e.y-=.01;const t=Math.atan2(-.01,e.mx);this.fireworks.engine.strokeStyle=e.c(.7),this.fireworks.engine.beginPath(),this.fireworks.engine.moveTo((this.x+e.x)*this.fireworks.width+4*Math.cos(t),e.y*this.fireworks.height+4*Math.sin(t)),this.fireworks.engine.lineTo((this.x+e.x)*this.fireworks.width+4*Math.cos(t+Math.PI),e.y*this.fireworks.height+4*Math.sin(t+Math.PI)),this.fireworks.engine.lineWidth=3,this.fireworks.engine.stroke()},this._prepareExplosion=e=>{e.explosion=[];for(let t=0,i=32;t<i;t++)e.explosion.push({r:2*t/Math.PI,s:.5+.5*Math.random(),d:0,y:0});e.cb=this._explode},this._explode=e=>{this.fireworks.engine.fillStyle=e.c(),e.explosion.forEach((t=>{t.d+=t.s,t.s*=.99,t.y+=.5;const i=2.5*t.s;this.fireworks.engine.globalAlpha=i,i<.05&&(e.cb=null),this.fireworks.engine.fillRect(Math.cos(t.r)*t.d+(this.x+e.x)*this.fireworks.width,Math.sin(t.r)*t.d+t.y+e.y*this.fireworks.height,3,3)})),this.fireworks.engine.globalAlpha=1}}pushSalve(){this.salve.push({x:0,mx:-.02*Math.random()*.04,y:1,ym:.05+.5*Math.random(),c:e(),cb:this._shot})}render(){this.t++,this.t<this.tmax&&this.t%this.tmod==0&&this.pushSalve();let e=!1;return this.salve.forEach((t=>{t.cb&&(e=!0,t.cb(t))})),!(this.t>this.tmax)||e}}(new class{constructor(){this.canvas=window.document.querySelector(".fireworks"),this.engine=this.canvas.getContext("2d"),this.stacks=new Map,this.resize()}resize(){this.width=window.innerWidth,this.height=window.innerHeight,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height)}clear(){this.engine.clearRect(0,0,this.width,this.height),this.engine.fillStyle="transparent",this.engine.fillRect(0,0,this.width,this.height)}addBattery(){const e=new t(this);this.stacks.set(Date.now(),e)}render(){Math.random()<.05&&this.addBattery(),this.clear(),this.stacks.forEach(((e,t)=>{e.render()||this.stacks.delete(t)})),requestAnimationFrame(this.render.bind(this))}run(){for(let e=0;e<5;e++)this.addBattery();window.addEventListener("resize",this.resize.bind(this)),this.render()}}).run()}()}();